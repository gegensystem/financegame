<!DOCTYPE html>
<html lang="de" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karriere-Navigator AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .finn-gradient { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .decision-btn { transition: all 0.2s ease-in-out; }
        .decision-btn:hover { transform: translateY(-2px); }
        .modal-hidden { display: none; }
    </style>
</head>
<body class="bg-slate-900 text-slate-300">

    <!-- Start Screen -->
    <div id="start-screen" class="min-h-screen flex flex-col items-center justify-center p-4 text-center">
        <div class="max-w-2xl">
            <h1 class="text-4xl md:text-5xl font-bold text-white">Karriere-Navigator <span class="finn-gradient text-transparent bg-clip-text">AI</span></h1>
            <p class="mt-4 text-lg text-slate-400">Triff die Finanzentscheidungen deines Lebens ‚Äì mit einem KI-Mentor an deiner Seite. Das Spiel l√§uft in 3-Jahres-Schritten. Dein Ziel: Erreiche finanzielle Freiheit bis zur Pension.</p>
        </div>
        <div id="career-choices" class="mt-10 grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl"></div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="hidden min-h-screen flex flex-col p-4 md:p-8">
        <header class="flex justify-between items-center pb-4 border-b border-slate-700">
            <h1 class="text-2xl font-bold text-white">Karriere-Navigator <span class="finn-gradient text-transparent bg-clip-text">AI</span></h1>
            <div class="text-right">
                <div class="text-sm text-slate-500">Alter</div>
                <div id="player-age" class="text-2xl font-bold text-white"></div>
            </div>
        </header>

        <main class="mt-6 flex-grow">
            <!-- Simplified Dashboard -->
            <div id="dashboard" class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
                <!-- Dashboard items will be injected here -->
            </div>

            <!-- Event Area -->
            <div class="mt-8 bg-slate-800/50 p-6 rounded-xl shadow-lg border border-slate-700">
                <div class="flex items-start gap-4">
                    <div class="w-12 h-12 rounded-full finn-gradient flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                    </div>
                    <div>
                        <h2 class="font-bold text-white">FINN <span class="text-sm font-medium text-slate-400">(Dein KI-Mentor)</span></h2>
                        <p id="finn-advice" class="mt-1 text-slate-400"></p>
                    </div>
                </div>
                <hr class="my-6 border-slate-700">
                <div>
                    <h3 class="font-semibold text-lg text-white">Situation:</h3>
                    <p id="event-description" class="mt-2 text-slate-300"></p>
                </div>
                <div id="decision-buttons" class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>
        </main>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="modal-hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70">
        <div class="bg-slate-800 border border-slate-700 rounded-xl shadow-2xl w-full max-w-md p-6 text-center">
            <h2 class="text-3xl font-bold text-white">Pensionsalter erreicht!</h2>
            <p class="mt-2 text-slate-400">Du bist <span id="final-age"></span>. Zeit, Bilanz zu ziehen.</p>
            <div class="mt-6 bg-slate-900/50 p-4 rounded-lg">
                <div class="text-sm text-slate-400">Finales Nettoverm√∂gen</div>
                <div id="final-networth" class="text-3xl font-bold text-white"></div>
            </div>
            <div class="mt-8">
                <button id="restart-game-btn" class="w-full max-w-xs mx-auto bg-slate-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition">Neu starten</button>
            </div>
        </div>
    </div>
    
    <div id="status-message" class="fixed bottom-5 right-5 bg-slate-200 text-slate-900 py-2 px-4 rounded-lg shadow-lg opacity-0 translate-y-4 transition-all duration-300 z-40 font-semibold"></div>

    <script>
    const DOMElements = {
        startScreen: document.getElementById('start-screen'),
        gameScreen: document.getElementById('game-screen'),
        careerChoices: document.getElementById('career-choices'),
        playerAge: document.getElementById('player-age'),
        dashboard: document.getElementById('dashboard'),
        finnAdvice: document.getElementById('finn-advice'),
        eventDescription: document.getElementById('event-description'),
        decisionButtons: document.getElementById('decision-buttons'),
        gameOverModal: document.getElementById('game-over-modal'),
        finalAge: document.getElementById('final-age'),
        finalNetworth: document.getElementById('final-networth'),
        restartGameBtn: document.getElementById('restart-game-btn'),
        statusMessage: document.getElementById('status-message'),
    };

    let gameState = {};

    const formatCurrency = (val) => new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR', minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(val);
    const showStatusMessage = (msg, dur = 3000) => {
        DOMElements.statusMessage.textContent = msg;
        DOMElements.statusMessage.classList.remove('opacity-0', 'translate-y-4');
        setTimeout(() => DOMElements.statusMessage.classList.add('opacity-0', 'translate-y-4'), dur);
    };
    const toggleModal = (modal, show) => modal.classList.toggle('modal-hidden', !show);

    const careers = {
        it: { name: "IT-Spezialist/in", start: { age: 22, salary: 65000, netWorth: 5000, knowledge: 60, stress: 40 } },
        marketing: { name: "Marketing-Manager/in", start: { age: 23, salary: 55000, netWorth: 3000, knowledge: 50, stress: 30 } },
        trade: { name: "Facharbeiter/in", start: { age: 20, salary: 48000, netWorth: 8000, knowledge: 70, stress: 20 } }
    };

    const events = [
        { id: 'start', description: "Du hast deinen ersten Job angetreten. Herzlichen Gl√ºckwunsch!", finnAdvice: "Willkommen! Deine Karriere beginnt jetzt. Jede Entscheidung z√§hlt.", options: [{ text: "Okay, weiter geht's!", action: () => nextStep() }] },
        { id: 'first_investment', description: "Du hast etwas Geld gespart. Nun stellt sich die Frage: Was tust du damit?", finnAdvice: "Der fr√ºhe Beginn des Investierens ist entscheidend f√ºr den Zinseszinseffekt.", options: [
            { text: "Auf dem Girokonto lassen", action: () => { gameState.stress -= 5; showStatusMessage("Das Geld ist sicher, aber die Inflation nagt daran."); nextStep(); } },
            { text: "In einen globalen ETF investieren", action: () => { gameState.investments = (gameState.investments || 0) + 5000; gameState.netWorth -= 5000; gameState.knowledge += 5; showStatusMessage("Gute Wahl! Dein Geld arbeitet jetzt f√ºr dich."); nextStep(); } },
        ]},
        { id: 'education_offer', description: "Dein Arbeitgeber bietet an, 50% der Kosten f√ºr eine relevante Weiterbildung zu √ºbernehmen. Die Kosten f√ºr dich w√§ren 2.500 ‚Ç¨.", finnAdvice: "Investitionen in dein eigenes Wissen zahlen die besten Zinsen.", options: [
            { text: "Angebot annehmen (2.500 ‚Ç¨)", action: () => { gameState.netWorth -= 2500; gameState.knowledge += 15; showStatusMessage("Wissens-Upgrade erfolgreich!"); nextStep(); } },
            { text: "Ablehnen (Geld sparen)", action: () => { showStatusMessage("Verst√§ndlich, aber eine verpasste Chance?"); nextStep(); } }
        ]},
        { id: 'salary_negotiation_chance', description: "Du hast das Gef√ºhl, dass deine Leistung eine Gehaltserh√∂hung rechtfertigt.", finnAdvice: "Eine gute Vorbereitung ist alles. Deine Chancen steigen mit deinem Wissenslevel.", options: [
            { text: "Verhandlung wagen", action: () => {
                const successChance = gameState.knowledge / 100;
                if (Math.random() < successChance) {
                    const raise = Math.round((gameState.salary * (0.05 + Math.random() * 0.05)) / 1000) * 1000;
                    gameState.salary += raise;
                    showStatusMessage(`Erfolg! ${formatCurrency(raise)} mehr Gehalt pro Jahr!`, 4000);
                } else {
                    gameState.stress += 5;
                    showStatusMessage("Leider hat es nicht geklappt. N√§chstes Mal!", 4000);
                }
                nextStep();
            }},
            { text: "Noch ein paar Jahre warten", action: () => { gameState.stress -= 5; showStatusMessage("Manchmal ist Geduld eine Tugend."); nextStep(); } }
        ]},
        { id: 'retirement_choice', description: "Du hast das Pensionsalter von 65 Jahren erreicht. Du kannst jetzt in den wohlverdienten Ruhestand gehen oder noch ein paar Jahre weiterarbeiten, um dein Verm√∂gen und deine Pension zu erh√∂hen.", finnAdvice: "Weiterzuarbeiten kann finanziell sehr lohnend sein, aber vergiss nicht auf deine Work-Life-Balance. Die Entscheidung liegt bei dir.", options: [
            { text: "In Pension gehen", action: () => endGame() },
            { text: "Weiterarbeiten (3 Jahre)", action: () => nextStep() }
        ]}
    ];

    function selectCareer(careerId) {
        gameState = { ...careers[careerId].start, investments: 0, pension: 0 };
        DOMElements.startScreen.classList.add('hidden');
        DOMElements.gameScreen.classList.remove('hidden');
        updateUI();
        presentEvent('start');
    }

    function updateUI() {
        const totalNetWorth = gameState.netWorth + (gameState.investments || 0);
        const metrics = [
            { label: "Nettoverm√∂gen", value: formatCurrency(totalNetWorth), icon: 'üí∞' },
            { label: "Jahresgehalt", value: formatCurrency(gameState.salary), icon: 'üíº' },
            { label: "Wissen", value: gameState.knowledge, icon: 'üß†' },
            { label: "Stress", value: gameState.stress, icon: 'üßò' }
        ];
        DOMElements.dashboard.innerHTML = metrics.map(m => `
            <div class="bg-slate-800 p-3 rounded-xl border border-slate-700 text-center">
                <div class="text-2xl">${m.icon}</div>
                <div class="text-xs text-slate-400 mt-1">${m.label}</div>
                <div class="text-lg font-bold text-white">${m.value}</div>
            </div>
        `).join('');
        DOMElements.playerAge.textContent = gameState.age;
    }

    function presentEvent(eventId) {
        const event = events.find(e => e.id === eventId);
        DOMElements.finnAdvice.textContent = event.finnAdvice;
        DOMElements.eventDescription.textContent = event.description;
        
        DOMElements.decisionButtons.innerHTML = '';
        event.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option.text;
            button.className = "w-full text-left p-4 bg-slate-700 hover:bg-slate-600 rounded-lg font-semibold text-white decision-btn";
            button.onclick = option.action;
            DOMElements.decisionButtons.appendChild(button);
        });
    }

    function nextStep() {
        if (gameState.age >= 68) {
            endGame();
            return;
        }

        if (gameState.age >= 65) {
            presentEvent('retirement_choice');
            return;
        }

        // Calculations for 3 years
        const years = 3;
        gameState.age += years;
        
        for (let i = 0; i < years; i++) {
            const netIncome = gameState.salary * 0.65;
            const livingCosts = gameState.salary * 0.4;
            gameState.netWorth += netIncome - livingCosts;
            gameState.pension += gameState.salary * 0.05;
            
            if (gameState.investments > 0) {
                const growth = (Math.random() * 0.15) - 0.03;
                gameState.investments *= (1 + growth);
            }
            // Small salary increase each year
            gameState.salary *= 1.02;
        }

        const availableEvents = events.filter(e => e.id !== 'start' && e.id !== 'retirement_choice');
        const nextEvent = availableEvents[Math.floor(Math.random() * availableEvents.length)];
        
        updateUI();
        
        setTimeout(() => {
            // Check again after calculations in case age is now >= 65
            if (gameState.age >= 65) {
                presentEvent('retirement_choice');
            } else {
                presentEvent(nextEvent.id);
            }
        }, 500);
    }

    function endGame() {
        const totalNetWorth = gameState.netWorth + (gameState.investments || 0);
        DOMElements.finalAge.textContent = gameState.age;
        DOMElements.finalNetworth.textContent = formatCurrency(totalNetWorth);
        toggleModal(DOMElements.gameOverModal, true);
    }

    function init() {
        Object.keys(careers).forEach(key => {
            const career = careers[key];
            const card = document.createElement('div');
            card.className = "bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700 cursor-pointer hover:border-indigo-500 transition-all";
            card.innerHTML = `<h3 class="text-xl font-bold text-white">${career.name}</h3>`;
            card.onclick = () => selectCareer(key);
            DOMElements.careerChoices.appendChild(card);
        });
        DOMElements.restartGameBtn.onclick = () => window.location.reload();
    }

    init();
    </script>
</body>
</html>
